---
import { getCollection } from 'astro:content';
import Container from '../ui/Container.astro';
import Section from '../ui/Section.astro';
import Heading from '../ui/Heading.astro';
import Button from '../ui/Button.astro';

const integrations = (await getCollection('integrations'))
  .filter((i) => i.data.featured)
  .sort((a, b) => a.data.name.localeCompare(b.data.name));
---

<Section id="integrations">
  <Container>
    <div class="text-center mb-10 lg:mb-14">
      <Heading as="h2">Integrations</Heading>
      <p class="mt-4 text-lg text-[var(--color-text-secondary)] max-w-2xl mx-auto">
        Connect your data source and route signals to your favorite tools.
      </p>
    </div>

    <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-6">
      {integrations.map((integration) => (
        <a
          href={`/integrations/${integration.data.slug}`}
          class="flex flex-col items-center gap-3 p-4 border-2 border-[var(--color-text)] shadow-[var(--shadow-card)] hover:shadow-[6px_6px_0_var(--color-text)] hover:-translate-x-0.5 hover:-translate-y-0.5"
        >
          <div class="w-10 h-10 flex items-center justify-center">
            <img
              src={integration.data.logo}
              alt={integration.data.name}
              width="40"
              height="40"
              loading="lazy"
              class="w-8 h-8 object-contain logo-adaptive"
            />
          </div>
          <span class="text-sm font-medium text-[var(--color-text)]">{integration.data.name}</span>
        </a>
      ))}
    </div>

    <div class="text-center mt-8">
      <Button href="/integrations" variant="outline">View all integrations</Button>
    </div>
  </Container>
</Section>
