---
import { getCollection } from 'astro:content';
import Container from '../ui/Container.astro';
import Section from '../ui/Section.astro';
import Heading from '../ui/Heading.astro';
import Card from '../ui/Card.astro';

const features = (await getCollection('features'))
  .sort((a, b) => a.data.order - b.data.order);

const accentColors = [
  'border-t-[var(--color-primary-500)]',
  'border-t-[var(--color-accent-500)]',
  'border-t-[var(--color-primary-400)]',
  'border-t-[var(--color-accent-400)]',
  'border-t-[var(--color-primary-600)]',
  'border-t-[var(--color-accent-600)]',
];

const iconPaths: Record<string, string> = {
  sparkles:
    'M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.455 2.456L21.75 6l-1.036.259a3.375 3.375 0 00-2.455 2.456z',
  'arrows-pointing-out':
    'M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15',
  link: 'M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m9.86-2.44a4.5 4.5 0 00-1.242-7.244l-4.5-4.5a4.5 4.5 0 00-6.364 6.364L4.25 8.25',
  'arrow-path':
    'M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3',
  bolt: 'M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z',
  'bell-alert':
    'M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0',
};
---

<Section id="features" class="bg-[var(--color-surface-accent-primary)] border-y-2 border-[var(--color-border)]">
  <Container>
    <div class="text-center mb-10 lg:mb-14">
      <Heading as="h2">Built for Revenue Teams</Heading>
      <p class="mt-4 text-lg text-[var(--color-text-secondary)] max-w-2xl mx-auto">
        Everything you need to turn product usage data into revenue signals.
      </p>
    </div>

    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {features.map((feature, i) => (
        <Card class={`border-t-4 ${accentColors[i % accentColors.length]}`}>
          <div class="inline-flex items-center justify-center w-10 h-10 border-2 border-[var(--color-primary-600)] bg-[var(--color-primary-bg)] text-[var(--color-primary-600)] mb-4">
            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d={iconPaths[feature.data.icon] || iconPaths.sparkles}
              ></path>
            </svg>
          </div>
          <h3 class="text-base font-semibold mb-2">{feature.data.title}</h3>
          <p class="text-sm text-[var(--color-text-secondary)] leading-relaxed">
            {feature.data.description}
          </p>
        </Card>
      ))}
    </div>
  </Container>
</Section>
