---
import { getCollection } from 'astro:content';
import Container from '../ui/Container.astro';
import Section from '../ui/Section.astro';
import Heading from '../ui/Heading.astro';
import Card from '../ui/Card.astro';
import Button from '../ui/Button.astro';

const useCases = (await getCollection('use-cases'))
  .filter((uc) => uc.data.featured)
  .sort((a, b) => a.data.order - b.data.order)
  .slice(0, 3);

const iconPaths: Record<string, string> = {
  'arrow-trending-up': 'M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941',
  'chart-bar': 'M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z',
  'shield-check': 'M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z',
  'funnel': 'M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 01-.659 1.591l-5.432 5.432a2.25 2.25 0 00-.659 1.591v2.927a2.25 2.25 0 01-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 00-.659-1.591L3.659 7.409A2.25 2.25 0 013 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0112 3z',
  'rocket': 'M15.59 14.37a6 6 0 01-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 006.16-12.12A14.98 14.98 0 009.631 8.41m5.96 5.96a14.926 14.926 0 01-5.841 2.58m-.119-8.54a6 6 0 00-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 00-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 01-2.448-2.448 14.9 14.9 0 01.06-.312m-2.24 2.39a4.493 4.493 0 00-1.757 4.306 4.493 4.493 0 004.306-1.758M16.5 9a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z',
};
---

<Section id="use-cases">
  <Container>
    <div class="text-center mb-10 lg:mb-14">
      <Heading as="h2">Use Cases</Heading>
      <p class="mt-4 text-lg text-[var(--color-text-secondary)] max-w-2xl mx-auto">
        See how teams use Beton to turn product signals into revenue.
      </p>
    </div>

    <div class="grid md:grid-cols-3 gap-6">
      {useCases.map((uc) => (
        <Card href={`/use-cases/${uc.id}/`}>
          {uc.data.icon && iconPaths[uc.data.icon] && (
            <div class="inline-flex items-center justify-center w-10 h-10 border-2 border-[var(--color-primary-600)] bg-[var(--color-primary-bg)] text-[var(--color-primary-600)] mb-3">
              <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d={iconPaths[uc.data.icon]}></path>
              </svg>
            </div>
          )}
          <h3 class="text-lg font-semibold mb-2">{uc.data.title}</h3>
          <p class="text-sm text-[var(--color-text-secondary)] leading-relaxed mb-4">
            {uc.data.description}
          </p>
          <span class="text-sm font-bold text-[var(--color-primary-600)] underline underline-offset-4 decoration-2">
            Learn more &rarr;
          </span>
        </Card>
      ))}
    </div>

    <div class="text-center mt-10">
      <Button href="/use-cases/" variant="outline">View all use cases</Button>
    </div>
  </Container>
</Section>
