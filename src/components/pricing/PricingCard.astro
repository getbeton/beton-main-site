---
interface Props {
  tier: {
    name: string;
    slug: string;
    price: string;
    priceNote?: string;
    description: string;
    highlighted: boolean;
    cta: { label: string; href: string };
    features: string[];
  };
}

const { tier } = Astro.props;
---

<div
  class:list={[
    'relative flex flex-col border-2 p-6 lg:p-8',
    tier.highlighted
      ? 'border-[var(--color-primary-500)] shadow-[var(--shadow-card)] bg-[var(--color-surface-raised)]'
      : 'border-[var(--color-text)] bg-[var(--color-surface-raised)]',
  ]}
  data-track-pricing={tier.slug}
>
  {tier.highlighted && (
    <div class="absolute -top-3 left-1/2 -translate-x-1/2">
      <span class="inline-flex items-center px-3 py-1 text-xs font-bold uppercase tracking-wider bg-[var(--color-primary-600)] text-white border-2 border-[var(--color-primary-600)]">
        Most Popular
      </span>
    </div>
  )}

  <div class="mb-6">
    <h3 class="text-lg font-semibold">{tier.name}</h3>
    <p class="text-sm text-[var(--color-text-secondary)] mt-1">{tier.description}</p>
  </div>

  <div class="mb-6">
    <div class="text-4xl font-[family-name:var(--font-heading)] tracking-tight">{tier.price}</div>
    {tier.priceNote && (
      <div class="text-sm text-[var(--color-text-secondary)] mt-1">{tier.priceNote}</div>
    )}
  </div>

  <a
    href={tier.cta.href}
    target={tier.cta.href.startsWith('http') ? '_blank' : undefined}
    rel={tier.cta.href.startsWith('http') ? 'noopener noreferrer' : undefined}
    class:list={[
      'block w-full text-center px-4 py-2.5 font-bold uppercase tracking-wider border-2 mb-6',
      tier.highlighted
        ? 'bg-[var(--color-primary-600)] text-white border-[var(--color-primary-600)] hover:bg-white hover:text-[var(--color-primary-600)]'
        : 'border-[var(--color-text)] text-[var(--color-text)] hover:bg-[var(--color-text)] hover:text-[var(--color-surface)]',
    ]}
    data-track-cta={`pricing-${tier.slug}`}
  >
    {tier.cta.label}
  </a>

  <ul class="space-y-3 flex-1">
    {tier.features.map((feature) => (
      <li class="flex items-start gap-2 text-sm">
        <svg
          class="w-5 h-5 text-[var(--color-accent-500)] shrink-0 mt-0.5"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="2"
          stroke="currentColor"
        >
          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5"></path>
        </svg>
        <span class="text-[var(--color-text-secondary)]">{feature}</span>
      </li>
    ))}
  </ul>
</div>
